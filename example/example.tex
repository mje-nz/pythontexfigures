\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}

\usepackage{pgf}
\usepackage{subfig}

% Make build reproducible
% https://tex.stackexchange.com/a/5961
% https://tex.stackexchange.com/a/313605
\pdfinfo{ /Producer (pdfTeX) }
\pdfinfoomitdate=1
\pdftrailerid{}
\pdfsuppressptexinfo=-1

% gobble=auto lets you indent inside code environments
% keeptemps=all keeps the code and output files so you can see what executed
\usepackage[gobble=auto,keeptemps=all]{pythontex}
\usepackage{pythontexfigures}

\begin{pythontexcustomcode}[begin]{py}
	# Set up python_figures first so it can configure matplotlib
	import pythontexfigures as pf
	pf.setup(pytex)

	# Set up environment for scripts
	import numpy as np
	import matplotlib.pyplot as plt
	import seaborn as sns
	sns.set_style('white')
\end{pythontexcustomcode}


\begin{document}
	\title{Latex Python figure examples}
	\author{Matthew Edwards}
	\date{July 2019}
	\maketitle

	\begin{figure}[h]
		\pyfig{'test.py'}
		\caption{Test Python figure.}
		\label{fig:test}
	\end{figure}

	\begin{figure}
		\centering
		\subfloat[Test figure (golden aspect ratio).]{%
			\pyfig{'test.py', width=0.45*pf.TEXT_WIDTH, aspect=pf.GOLDEN}
		}
		\subfloat[Test figure (square aspect ratio).]{%
			\pyfig{'test.py', width=0.45*pf.TEXT_WIDTH}
		}
		\caption{Side-by-side Python figures.}
		\label{fig:test2}
	\end{figure}
\end{document}
